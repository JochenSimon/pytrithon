import re
import sys
import argparse
from PyQt5.QtWidgets import QApplication
from Pytrithon.monipulator import check

parser = argparse.ArgumentParser()
parser.add_argument("agents", nargs="+", help="agents to check")
args = parser.parse_args()

app = QApplication(sys.argv)
app.setStyleSheet(open("dark.css").read())
app.setQuitOnLastWindowClosed(True)

for agent in args.agents:
  if re.sub(r"[\w.]", "", agent) or agent.startswith(".") or agent.endswith(".") or ".." in agent or not agent:
    print("Illegal agent name: '"+agent+"'")
    sys.exit(1)

window = check(None, {agent: None for agent in args.agents})

sys.exit(app.exec())
